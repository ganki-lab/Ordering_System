# 茶茶日和 (Chacha Biyori) - カフェPOSシステム

和風カフェ向けのモダンなPOSシステムです。React Native + Expo + Supabaseで構築されており、テーブル管理、注文管理、メニュー管理などの機能を提供します。

## 🌟 主な機能

- **テーブル管理**: テーブルの状態管理（空席/使用中/予約済み/清掃中）
- **注文管理**: リアルタイムでの注文受付と管理
- **メニュー管理**: カテゴリ別メニューの管理と編集
- **注文履歴**: 過去の注文履歴の確認
- **売上分析**: 日次・月次・年次の売上データ分析
- **データベース連携**: Supabaseとの連携でリアルタイムデータ同期

## 🚀 セットアップ

### 前提条件

- Node.js 18以上
- npm または yarn
- Expo CLI
- Supabaseアカウント（オプション）

### インストール

1. リポジトリをクローン
```bash
git clone <repository-url>
cd chacha-biyori
```

2. 依存関係をインストール
```bash
npm install
```

3. 開発サーバーを起動
```bash
npm run dev
```

## 📱 使い方

### 初回起動時

1. アプリを起動すると、テーブル管理画面が表示されます
2. 初期状態では8つのテーブル（T1〜T8）が設定されています
3. データベース未設定の場合、ローカルデータで動作します

### データベース設定（推奨）

1. `.env.example`ファイルを`.env`にコピー
```bash
cp .env.example .env
```

2. `.env`ファイルを編集してSupabase情報を設定：
```env
EXPO_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
EXPO_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
```

3. アプリを再起動
```bash
npm run dev
```

**注意**: `.env`ファイルはGitにコミットしないでください（`.gitignore`に含まれています）

### テーブル管理

#### 新しい注文を開始
1. **空席**のテーブルをタップ
2. メニュー選択画面が開きます
3. 商品をタップして注文に追加
4. **「注文確定」**で注文を確定

#### 追加注文
1. **使用中**のテーブルをタップ
2. **「追加注文」**を選択
3. 追加したい商品を選択

#### 支払い・退席
1. **使用中**のテーブルをタップ
2. **「支払い・退席」**を選択
3. 注文内容と金額を確認
4. **「支払い完了」**で会計を完了

#### テーブル管理操作
- **長押し**でテーブルの詳細操作メニューを表示
- テーブル名の変更、削除、状態変更が可能

### メニュー管理

1. **設定タブ** → **「メニュー管理」**
2. **「+」**ボタンで新しいメニュー項目を追加
3. 既存項目の編集は**鉛筆アイコン**をタップ
4. 削除は**ゴミ箱アイコン**をタップ

#### カテゴリ管理
1. **設定タブ** → **「カテゴリ管理」**
2. 新しいカテゴリの追加、既存カテゴリの編集・削除・並び替えが可能

### 注文履歴の確認

1. **注文履歴タブ**をタップ
2. 過去の注文履歴を時系列で確認
3. 各注文の詳細（テーブル、商品、金額、時刻）を表示

### 売上分析

1. **分析タブ**をタップ（実装予定）
2. 日次・月次・年次の売上データを確認
3. グラフとサマリーで売上状況を把握

## 🎯 基本的な運用フロー

### 1. 開店準備
- アプリを起動
- 全テーブルが**「空席」**状態であることを確認
- メニューの確認・更新

### 2. 注文受付
1. お客様が着席したテーブルをタップ
2. メニューから商品を選択
3. 注文内容を確認して**「注文確定」**

### 3. 追加注文
1. 該当テーブルをタップ
2. **「追加注文」**を選択
3. 追加商品を選択して確定

### 4. 会計・退席
1. 該当テーブルをタップ
2. **「支払い・退席」**を選択
3. 注文内容と金額を確認
4. **「支払い完了」**で処理完了

### 5. 閉店処理
- 全テーブルが**「空席」**状態であることを確認
- 注文履歴で当日の売上を確認

## 🔧 設定項目

### データベース設定
- **データベース接続状態**: 現在の接続状態を表示
- 設定変更はエンジニアが`.env`ファイルで行います

### 店舗設定
- **メニュー管理**: 商品の追加・編集・削除
- **カテゴリ管理**: メニューカテゴリの管理
- **レシート印刷**: 自動印刷の有効/無効

### アプリ設定
- **通知**: 新規注文の通知設定
- **音響効果**: ボタン音の有効/無効

## 📊 データ管理

### ローカルデータ
- 環境変数未設定時はローカルデータで動作
- アプリ再起動時にデータは初期化されます

### Supabaseデータベース（環境変数設定時）
- リアルタイムでのデータ同期
- データの永続化
- 複数端末での同期（将来対応予定）

## 🛠️ 技術仕様

- **フレームワーク**: React Native + Expo SDK 54
- **言語**: TypeScript
- **データベース**: Supabase (PostgreSQL)
- **状態管理**: React Hooks
- **ナビゲーション**: Expo Router
- **アイコン**: Lucide React Native

## 📱 対応プラットフォーム

- **Web**: ブラウザでの動作
- **iOS**: iPhone/iPad（Expo Goまたはビルド版）
- **Android**: Android端末（Expo Goまたはビルド版）

## 🔍 トラブルシューティング

### データベース接続エラー
1. `.env`ファイルのSupabase URLとAPI Keyを確認
2. インターネット接続を確認
3. アプリを再起動
4. エンジニアに設定確認を依頼

### 注文が表示されない
1. テーブル状態を確認
2. アプリを再起動
3. データベース接続状態を確認

### メニューが表示されない
1. メニュー管理で商品が有効になっているか確認
2. カテゴリ設定を確認
3. データベース同期状態を確認

## 📞 サポート

問題が発生した場合は、以下の情報を含めてお問い合わせください：
- 使用端末・OS
- エラーメッセージ
- 操作手順
- データベース接続状態

## 📄 ライセンス

© 2024 Chacha Biyori POS System

---

**茶茶日和**で、和やかなカフェ運営をサポートします 🍵